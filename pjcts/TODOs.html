<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <title>ToDo List</title>
  </head>
  <body>
    <div class="container my-4 jumbotron">
      <h2 class="text-center">TODOs List</h2>
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" class="form-control ipt" id="title" />
        <label for="desc">Description</label>
        <span id="replace">
          <textarea
            name="desc"
            id="desc"
            class="form-control ipt"
            cols="30"
            rows="5"
          ></textarea>
        </span>
      </div>
      <button class="btn btn-primary" id="add">Add List</button>
    </div>
    <div  class="container items">
        <h2 class="Htwo">Your Items</h2></div>
    <div id="items" class="container jumbotron my-4 items">
      <div class="items">
        </div>
      </div>
    <!-- </div> -->

    <script>
        function getandupdate(){

        title = document.getElementById("title").value;
        desc = document.getElementById("desc").value;
        if (localStorage.getItem("notes") == null) {
          notesArray = [];
          notesArray.push([title, desc]);
          localStorage.setItem("notes", JSON.stringify(notesArray));
        } else {
          exnotes = localStorage.getItem("notes");
          notesArray = JSON.parse(exnotes);
          notesArray.push([title, desc]);
          localStorage.setItem("notes", JSON.stringify(notesArray));
        }
        update();
        }
        function update(){
        //     title = document.getElementById("title").value;
        // desc = document.getElementById("desc").value;
        if (localStorage.getItem("notes") == null) {
          notesArray = [];
        //   notesArray.push([title, desc]);
          localStorage.setItem("notes", JSON.stringify(notesArray));
        } else {
          exnotes = localStorage.getItem("notes");
          notesArray = JSON.parse(exnotes);
        //   notesArray.push([title, desc]);
        //   localStorage.setItem("notes", JSON.stringify(notesArray));
        }
        let div = document.getElementById("items");
        let str = "";
        notesArray.forEach((element, index) => {
          str +=`<div class="note"><h2>${element[0]}</h2>
          <p>${element[1]}</p>
          <button class="icon-button">
            <i class="material-symbols-outlined"> edit </i>
          </button>
          <button class="icon-button">
            <i class="material-symbols-outlined" onclick="deleted(${index})"> delete </i>
          </button></div>`
        });
        div.innerHTML=str;
        document.getElementById("title").value = null;
        document.getElementById("desc").value = null;
        }
      add = document.getElementById("add");
      add.addEventListener("click",getandupdate);
      update();
      function deleted(note){
        nots=localStorage.getItem('notes');
        not=JSON.parse(nots);
        not.splice(note,1);
        localStorage.setItem('notes', JSON.stringify(not));
        update()

      }
    </script>
  </body>
</html>
